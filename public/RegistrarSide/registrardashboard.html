<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="registrardashboard.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <nav class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebarToggle">
                <i class="fas fa-bars"></i>
            </button>
            
            <!-- User Profile Section -->
            <div class="user-profile">
                <div class="avatar" id="avatarContainer">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="user-info">
                    <h3 id="userName"></h3>
                    <div class="user-role">Registrar</div>
                </div>
            </div>
            
            <!-- Navigation Menu -->
            <div class="menu-label">Navigation</div>
            <ul class="nav-menu">
                <li class="nav-item active" data-section="dashboard">
                    <i class="fas fa-home"></i>
                    <span class="nav-text">Dashboard</span>
                </li>
                <li class="nav-item" data-section="enrollment">
                    <i class="fas fa-user-plus"></i>
                    <span class="nav-text">Enrollment</span>
                </li>
                <li class="nav-item" data-section="announcements">
                    <i class="fas fa-bullhorn"></i>
                    <span class="nav-text">Announcements</span>
                    
                </li>
                <li class="nav-item" data-section="students">
                    <i class="fas fa-user-graduate"></i>
                    <span class="nav-text">Students Info's</span>
                </li>
                <li class="nav-item" data-section="courses">
                    <i class="fas fa-clipboard-list"></i>
                    <span class="nav-text">Course Management</span>
                    
                </li>
                <li class="nav-item" data-section="messages">
                    <i class="fas fa-envelope"></i>
                    <span class="nav-text">Messages</span>
                    
                </li>
            </ul>
            
            <!-- Account Section -->
            <div class="menu-label">Account</div>
            <ul class="nav-menu">
                <li class="nav-item" data-section="profile">
                    <i class="fas fa-user"></i>
                    <span class="nav-text">Profile</span>
                </li>
                <li class="nav-item" data-section="settings">
                    <i class="fas fa-cog"></i>
                    <span class="nav-text">Settings</span>
                </li>
            </ul>
            
            <!-- Sidebar Footer -->
            <div class="sidebar-footer">
                <div class="mode-toggle">
                    <label for="darkModeToggle">Dark Mode</label>
                    <div class="switch">
                        <input type="checkbox" id="darkModeToggle">
                        <span class="slider"></span>
                    </div>
                </div>
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span class="logout-text">Logout</span>
                </button>
            </div>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <header>
                <div class="welcome-message">Welcome, </div>
                <div class="header-actions">
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" placeholder="Search...">
                    </div>
                    <div class="notification-icon" id="notificationIcon">
                        <i class="fas fa-bell"></i>
                        <span class="notification-count">3</span>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="content-section active" id="dashboard">
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-chalkboard-teacher"></i>
                                </div>
                                Active Courses
                            </h3>
                            <div class="card-options">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="card-content">
                            <p>You are currently teaching 4 courses this semester. Manage your classes and track student progress.</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-tasks"></i>
                                </div>
                                Pending Grades
                            </h3>
                            <div class="card-options">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="card-content">
                            <p>You have 12 assignments to grade. Review and submit grades before the deadline.</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-users"></i>
                                </div>
                                Total Students
                            </h3>
                            <div class="card-options">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="card-content">
                            <p>You have 127 students enrolled across all your courses. Track attendance and performance.</p>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <div class="card-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                Upcoming Classes
                            </h3>
                            <div class="card-options">
                                <i class="fas fa-ellipsis-v"></i>
                            </div>
                        </div>
                        <div class="card-content">
                            <p>Check your schedule for upcoming classes, meetings, and important academic events.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Enrollment Content Section -->
<div class="content-section" id="enrollment">
    <div class="enrollment-container">
        <div class="enrollment-header">
            <div class="header-left">
                <i class="fas fa-user-plus"></i>
                <div>
                    <h2>Enrollment Requests</h2>
                    <div class="enrollment-stats">
                        <div class="stat-item">
                            <i class="fas fa-clock"></i>
                            <span id="pending-count">0 Pending</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-check-circle"></i>
                            <span id="approved-count">0 Approved</span>
                        </div>
                        <div class="stat-item">
                            <i class="fas fa-times-circle"></i>
                            <span id="rejected-count">0 Rejected</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="header-actions">
                <button class="export-btn">
                    <i class="fas fa-download"></i>
                    Export Data
                </button>
            </div>
        </div>

        <div class="enrollment-content">
            <div class="enrollment-filters">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">All Requests</button>
                    <button class="filter-btn" data-filter="pending">Pending</button>
                    <button class="filter-btn" data-filter="approved">Approved</button>
                    <button class="filter-btn" data-filter="rejected">Rejected</button>

                    <button class="filter-btn" data-filter="regular">Regular Students</button>
                    <button class="filter-btn" data-filter="irregular">Irregular Students</button>
                    <button class="filter-btn" data-filter="with-receipt">With Receipt</button>
                    <button class="filter-btn" data-filter="no-receipt">No Receipt</button>
                    <button class="filter-btn" data-filter="recent">Recent (7 days)</button>
                </div>
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" class="search-input" placeholder="Search student name..." id="enrollment-search">
                </div>
            </div>

            <div class="enrollment-list" id="enrollment-list">
                <!-- Enrollment cards will be populated by JavaScript -->
                <div class="no-enrollments" id="no-enrollments">
                    <i class="fas fa-user-graduate"></i>
                    <h3>No Enrollment Requests</h3>
                    <p>No enrollment requests found matching your criteria.</p>
                </div>
            </div>
        </div>
    </div>
</div>


            
            <!-- Enhanced Announcements Content -->
    <div class="content-section" id="announcements">
        <div class="announcements-container">
            <!-- Header -->
            <div class="announcements-header">
                <div class="header-left">
                    <i class="fas fa-bullhorn"></i>
                    <div>
                        <h2>Announcements</h2>
                        <div class="announcement-stats">
                            <div class="stat-item">
                                <i class="fas fa-list"></i>
                                <span id="totalCount">0 Total</span>
                            </div>
                            <div class="stat-item">
                                <i class="fas fa-exclamation-circle"></i>
                                <span id="urgentCount">0 Urgent</span>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="add-announcement-btn" id="addAnnouncementBtn">
                    <i class="fas fa-plus"></i>
                    Add Announcement
                </button>
            </div>

            <!-- Content -->
            <div class="announcements-content">
                <!-- Filters -->
                <div class="announcements-filters">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="urgent">Urgent</button>
                        <button class="filter-btn" data-filter="important">Important</button>
                        <button class="filter-btn" data-filter="general">General</button>
                    </div>
                    <div class="search-container">
                        <i class="fas fa-search"></i>
                        <input type="text" class="search-input" placeholder="Search announcements..." id="announcementSearchInput">
                    </div>
                </div>

                <!-- Course Filters -->
                <div class="course-filters">
                    <button class="course-btn active" data-course="all">All Courses</button>
                    <button class="course-btn" data-course="BSIT">BSIT</button>
                    <button class="course-btn" data-course="BSCS">BSCS</button>
                    <button class="course-btn" data-course="BSIS">BSIS</button>
                    <button class="course-btn" data-course="BSBA">BSBA</button>
                </div>

                <div class="year-filters">
                    <button class="year-btn active" data-year="all">All Years</button>
                    <button class="year-btn" data-year="1st-year">1st Year</button>
                    <button class="year-btn" data-year="2nd-year">2nd Year</button>
                    <button class="year-btn" data-year="3rd-year">3rd Year</button>
                    <button class="year-btn" data-year="4th-year">4th Year</button>
                </div>

                <!-- Loading Spinner -->
                <div id="loadingSpinner" class="loading-spinner" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Loading announcements...</p>
                </div>

                <!-- Announcements List -->
                <div class="announcements-list" id="announcementsList">
                    <!-- Sample Announcement Card Structure -->
                    <div class="announcement-card">
                        <div class="announcement-header">
                            <div class="announcement-badges">
                                <span class="priority-badge urgent">Urgent</span>
                                <span class="course-badge">BSIT</span>
                                <span class="year-badge">1st Year</span>
                            </div>
                            <div class="announcement-actions">
                                <button class="action-btn edit" title="Edit">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="action-btn delete" title="Delete">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </div>
                        <h3 class="announcement-title">Sample Announcement Title</h3>
                        <div class="announcement-content">
                            This is a sample announcement content that demonstrates the structure and styling.
                        </div>
                        <img src="https://via.placeholder.com/400x200" alt="Announcement image" class="announcement-image">
                        <div class="announcement-meta">
                            <div class="meta-left">
                                <div class="meta-item">
                                    <i class="fas fa-user"></i>
                                    <span>Admin User</span>
                                </div>
                                <div class="meta-item">
                                    <i class="fas fa-calendar"></i>
                                    <span>Aug 5, 2024, 10:30 AM</span>
                                </div>
                            </div>
                            <div class="view-count">
                                <i class="fas fa-eye"></i>
                                <span>124 views</span>
                            </div>
                        </div>
                    </div>

                    <!-- No announcements message -->
                    <div class="no-announcements" id="noAnnouncementsMessage" style="display: none;">
                        <i class="fas fa-bullhorn"></i>
                        <h3>No Announcements Yet</h3>
                        <p>Click "Add Announcement" to create your first announcement.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Enhanced Add/Edit Announcement Modal -->
        <div class="modal-overlay" id="announcementModal">
            <div class="modal">
                <div class="modal-header">
                    <h3 id="modalTitle">Add New Announcement</h3>
                    <button class="modal-close" id="modalCloseBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="announcementForm">
                        <div class="form-group">
                            <label class="form-label" for="announcementTitle">Title *</label>
                            <input type="text" class="form-input" id="announcementTitle" required placeholder="Enter announcement title">
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="announcementContent">Content *</label>
                            <textarea class="form-input form-textarea" id="announcementContent" required placeholder="Enter announcement content..." rows="5"></textarea>
                        </div>

                        <div class="form-group">
                            <label class="form-label" for="targetAudience">Target Audience</label>
                            <select class="form-input form-select" id="targetAudience">
                                <option value="All Students">All Students</option>
                                <option value="Registrar">Registrar</option>
                                <option value="Faculty">Faculty</option>
                            </select>
                        </div>

                        <div class="course-year-grid">
                            <div class="form-group">
                                <label class="form-label" for="targetCourse">Target Course</label>
                                <select class="form-input form-select" id="targetCourse">
                                    <option value="All">All Courses</option>
                                    <option value="BSIT">BSIT</option>
                                    <option value="BSCS">BSCS</option>
                                    <option value="BSIS">BSIS</option>
                                    <option value="BSBA">BSBA</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label class="form-label" for="targetYear">Target Year Level</label>
                                <select class="form-input form-select" id="targetYear">
                                    <option value="All">All Year Levels</option>
                                    <option value="1st Year">1st Year</option>
                                    <option value="2nd Year">2nd Year</option>
                                    <option value="3rd Year">3rd Year</option>
                                    <option value="4th Year">4th Year</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Priority Level *</label>
                            <div class="priority-options">
                                <div class="priority-option">
                                    <input type="radio" class="priority-radio" id="priorityGeneral" name="priority" value="general" checked>
                                    <label class="priority-label general" for="priorityGeneral">General</label>
                                </div>
                                <div class="priority-option">
                                    <input type="radio" class="priority-radio" id="priorityImportant" name="priority" value="important">
                                    <label class="priority-label important" for="priorityImportant">Important</label>
                                </div>
                                <div class="priority-option">
                                    <input type="radio" class="priority-radio" id="priorityUrgent" name="priority" value="urgent">
                                    <label class="priority-label urgent" for="priorityUrgent">Urgent</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Attachment (Optional)</label>
                            <div class="image-upload-area" id="imageUploadContainer">
                                <div class="upload-icon">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                </div>
                                <div class="upload-text">
                                    <strong>Click to upload</strong> or drag and drop
                                </div>
                                <div class="upload-hint">
                                    PNG, JPG, GIF up to 5MB
                                </div>
                                <input type="file" id="imageInput" name="image" accept="image/*" style="display: none;">
                            </div>
                            <div id="imagePreview" class="image-preview" style="display: none;">
                                <img id="previewImage" alt="Preview">
                                <button type="button" id="removeImageBtn" class="remove-image-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">
                        <i class="fas fa-times"></i>
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary" id="saveBtn" form="announcementForm">
                        <i class="fas fa-save" id="saveIcon"></i>
                        <span id="saveBtnText">Save Announcement</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Success/Error Alert Messages -->
        <div id="alertContainer" style="position: fixed; top: 20px; right: 20px; z-index: 1001; max-width: 400px;">
            <!-- Alerts will be dynamically inserted here -->
        </div>
    </div>
            
            <!-- Students Content -->
            <div class="content-section" id="students">
                <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>Students Management</h1>
            <p>View and manage student information, enrollment, and academic records.</p>
        </div>

        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <h3>BSIT Students</h3>
                <div class="number" id="bsitStudents">5</div>
            </div>
            <div class="stat-card">
                <h3>BSCS Students</h3>
                <div class="number" id="bscsStudents">8</div>
            </div>
            <div class="stat-card">
                <h3>BSIS Students</h3>
                <div class="number" id="bsisStudents">4</div>
            </div>
            <div class="stat-card">
                <h3>BSBA Students</h3>
                <div class="number" id="bsbaStudents">7</div>
            </div>
            <div class="stat-card">
                <h3>Total Students</h3>
                <div class="number" id="totalStudents">24</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <div class="controls-row">
                <div class="search-group">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search students by name, email, or ID...">
                    <select class="filter-select" id="programFilter">
                        <option value="">All Programs</option>
                        <option value="information_technology">BSIT</option>
                        <option value="information_system">BSIS</option>
                        <option value="computer_science">BSCS</option>
                        <option value="business_administration">BSBA</option>
                    </select>
                    <select class="filter-select" id="yearFilter">
                        <option value="">All Years</option>
                        <option value="1st_year">1st Year</option>
                        <option value="2nd_year">2nd Year</option>
                        <option value="3rd_year">3rd Year</option>
                        <option value="4th_year">4th Year</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="addStudentBtn">
                    <span>‚ûï</span> Add New Student
                </button>
            </div>
        </div>

        <!-- Students Table -->
        <div class="table-container">
            <div class="loading" id="loadingState">
                <div class="spinner"></div>
                <p>Loading students...</p>
            </div>
            
            <div class="empty-state" id="emptyState" style="display: none;">
                <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1H5C3.89 1 3 1.89 3 3V21C3 22.11 3.89 23 5 23H19C20.11 23 21 22.11 21 21V9M19 21H5V3H13V9H19Z"/>
                </svg>
                <h3>No Students Found</h3>
                <p>No students match your current search criteria.</p>
            </div>

            <table class="table" id="studentsTable" style="display: none;">
                <thead>
                    <tr>
                        <th>Student</th>
                        <th>Student ID</th>
                        <th>Student Type</th>
                        <th>Email</th>
                        <th>Program</th>
                        <th>Year Level</th>
                        <th>Contact</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="studentsTableBody">
                    <!-- Dynamic content will be loaded here -->
                </tbody>
            </table>
        </div>

        <!-- Pagination -->
        <div class="pagination" id="pagination" style="display: none;">
            <!-- Pagination buttons will be generated here -->
        </div>
    </div>

    <!-- Add/Edit Student Modal -->
    <div class="modal" id="studentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add New Student</h2>
                <button class="close-btn" id="closeModalBtn">&times;</button>
            </div>
            <form id="studentForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="firstName">First Name *</label>
                        <input type="text" class="form-control" id="firstName" required>
                    </div>
                    <div class="form-group">
                        <label for="lastName">Last Name *</label>
                        <input type="text" class="form-control" id="lastName" required>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="email">Email *</label>
                        <input type="email" class="form-control" id="email" required>
                    </div>
                    <div class="form-group">
                        <label for="phone">Phone</label>
                        <input type="tel" class="form-control" id="phone">
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="program">Program *</label>
                        <select class="form-control" id="program" required>
                            <option value="">Select Program</option>
                            <option value="information_technology">BSIT</option>
                            <option value="computer_science">BSCS</option>
                            <option value="information_system">BSIS</option>
                            <option value="business_administration">BSBA</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="yearLevel">Year Level *</label>
                        <select class="form-control" id="yearLevel" required>
                            <option value="">Select Year</option>
                            <option value="1st_year">1st Year</option>
                            <option value="2nd_year">2nd Year</option>
                            <option value="3rd_year">3rd Year</option>
                            <option value="4th_year">4th Year</option>
                        </select>
                    </div>
                </div>
                <div class="form-grid">
                    <div class="form-group">
                        <label for="dateOfBirth">Date of Birth</label>
                        <input type="date" class="form-control" id="dateOfBirth">
                    </div>
                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" id="address">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" id="cancelBtn">Cancel</button>
                    <button type="submit" class="btn btn-primary" id="submitBtn">Save Student</button>
                </div>
            </form>
        </div>
    </div>
            </div>
            
            
            <div class="content-section" id="courses">
             <!-- Course Management Content for Registrar -->
    <div class="course-management">
        <!-- Header -->
        <div class="course-header">
            <h1>üìö Course Management</h1>
            <p1>Manage courses, subjects, and academic programs for all students</p1>
        </div>

        <!-- Registrar Permission Note -->
        <div class="registrar-note">
            <span class="note-icon">‚ÑπÔ∏è</span>
            <strong>Registrar Access:</strong> You can view all programs, add/edit subjects, and generate reports. Contact administration to add new programs or delete existing content.
        </div>

        <div class="course-container">
            <!-- Programs Panel -->
            <div class="programs-panel">
                <h3>
                    <span>üìã</span>
                    Select Program
                </h3>
                <div class="program-cards">
                    <!-- Programs will be loaded here dynamically -->
                    <div class="loading">
                        <div class="loading-spinner"></div>
                        Loading programs...
                    </div>
                </div>
            </div>

            <!-- Curriculum Panel -->
            <div class="curriculum-panel">
                <div class="curriculum-header">
                    <div class="curriculum-title">
                        <h3 id="curriculumTitle">
                            <span>üéì</span>
                            Select a Program
                        </h3>
                        <div class="curriculum-details" id="curriculumDetails">
                            Choose a program to view curriculum
                        </div>
                    </div>
                    
                    <div class="curriculum-controls">
                        <div class="control-group">
                            <label for="yearSelect">Year Level</label>
                            <select class="form-select" id="yearSelect">
                                <option value="1st Year">1st Year</option>
                                <option value="2nd Year">2nd Year</option>
                                <option value="3rd Year">3rd Year</option>
                                <option value="4th Year">4th Year</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label for="termSelect">Semester</label>
                            <select class="form-select" id="termSelect">
                                <option value="1st Term">1st Term</option>
                                <option value="2nd Term">2nd Term</option>
                                <option value="3rd Term">3rd Term</option>
                            </select>
                        </div>
                        
                        <div class="control-group">
                            <label>Total Units</label>
                            <div class="units-display" id="totalUnits">0 Units</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons (Modified for Registrar) -->
                <div class="action-buttons">
                    <button class="action-btn btn-primary" onclick="openModal('addSubjectModal')">
                        <span>‚ûï</span> Add Subject
                    </button>
                    <button class="action-btn btn-secondary" onclick="generateReport()">
                        <span>üìä</span> Generate Report
                    </button>
                </div>

                <!-- Search Bar -->
                <div class="search-container">
                    <input type="text" class="search-input" id="subjectSearch" placeholder="Search subjects by code or name...">
                    <span class="search-icon">üîç</span>
                </div>

                <!-- Subjects Table -->
                <div class="subjects-table-container">
                    <table class="subjects-table">
                        <thead>
                            <tr>
                                <th>Code</th>
                                <th>Description</th>
                                <th>Section</th>
                                <th>Units</th>
                                <th>Prerequisites</th>
                                <th>Schedule</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="subjectsTableBody">
                            <tr>
                                <td colspan="7" class="text-center" style="padding: 40px;">
                                    <div class="empty-state">
                                        <div class="empty-icon">üìö</div>
                                        <h4>Select a Program</h4>
                                        <p>Choose a program from the left panel to view its curriculum</p>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Subject Modal -->
    <div id="editSubjectModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
        <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h3 style="margin: 0 0 20px 0; color: #2c3e50;">‚úèÔ∏è Edit Subject</h3>
            <form id="editSubjectForm">
                <!-- Hidden fields for context -->
                <input type="hidden" id="editSubjectId">
                <input type="hidden" id="editProgramId">
                <input type="hidden" id="editYearLevel">
                <input type="hidden" id="editSemester">
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Subject Code *</label>
                    <input type="text" id="editSubjectCode" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Subject Description *</label>
                    <input type="text" id="editSubjectDescription" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Units *</label>
                    <input type="number" id="editSubjectUnits" required min="1" max="6" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Section</label>
                    <input type="text" id="editSubjectSection" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Prerequisites</label>
                    <input type="text" id="editSubjectPrereq" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 5px; font-weight: 500;">Schedule</label>
                    <input type="text" id="editSubjectSchedule" placeholder="e.g., MWF 9:00-10:00am" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
                </div>
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button type="button" onclick="closeModal('editSubjectModal')" style="padding: 10px 20px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer;">Cancel</button>
                    <button type="button" onclick="updateSubject()" style="padding: 10px 20px; border: none; background: #3498db; color: white; border-radius: 6px; cursor: pointer;">Update Subject</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Subject Modal - ADD THIS TO REGISTRAR HTML -->
<div id="addSubjectModal" class="modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
    <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 12px; width: 90%; max-width: 500px; max-height: 90vh; overflow-y: auto;">
        <h3 style="margin: 0 0 20px 0; color: #2c3e50;">‚ûï Add New Subject</h3>
        <form id="addSubjectForm">
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Subject Code *</label>
                <input type="text" id="subjectCode" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="e.g., IT 101">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Subject Description *</label>
                <input type="text" id="subjectDescription" required style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="e.g., Introduction to Computing">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Units *</label>
                <input type="number" id="subjectUnits" required min="1" max="6" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="3">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Section</label>
                <input type="text" id="subjectSection" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="e.g., A, B, C">
            </div>
            <div style="margin-bottom: 15px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Prerequisites</label>
                <input type="text" id="subjectPrereq" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;" placeholder="e.g., None, IT 100">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; margin-bottom: 5px; font-weight: 500;">Schedule</label>
                <input type="text" id="subjectSchedule" placeholder="e.g., MWF 9:00-10:00am" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="display: flex; gap: 10px; justify-content: flex-end;">
                <button type="button" onclick="closeModal('addSubjectModal')" style="padding: 10px 20px; border: 1px solid #ddd; background: #f8f9fa; border-radius: 6px; cursor: pointer;">Cancel</button>
                <button type="button" onclick="addSubject()" style="padding: 10px 20px; border: none; background: #28a745; color: white; border-radius: 6px; cursor: pointer;">Add Subject</button>
            </div>
        </form>
    </div>
</div>


            </div>
            
            <!-- Messages Content -->
            <div class="content-section" id="messages">
                <div class="chat-container">
        <!-- Left Sidebar - Contacts -->
        <div class="contacts-panel">
            <div class="contacts-header">
                <h3>Messages</h3>
                <button class="new-chat-btn" onclick="openNewChatModal()">
                    <i class="fas fa-plus"></i>
                </button>
            </div>
            
            <div class="search-section">
                <div class="search-wrapper">
                    <i class="fas fa-search"></i>
                    <input type="text" class="search-input" placeholder="Search contacts..." oninput="filterContacts(this.value)">
                </div>
                <div class="role-filters">
                    <button class="role-tag active" onclick="filterByRole('all')">All</button>
                    <button class="role-tag" onclick="filterByRole('student')">Students</button>
                    <button class="role-tag" onclick="filterByRole('admin')">Admin</button>
                    <button class="role-tag" onclick="filterByRole('faculty')">Faculty</button>
                </div>
            </div>
            
            <div class="contacts-list" id="contactsList">
                <!-- Contacts will be populated here -->
            </div>
        </div>

        <!-- Right Panel - Chat -->
        <div class="chat-panel">
            <div class="empty-chat" id="emptyChat">
                <i class="fas fa-comments"></i>
                <h3>Welcome to Academic Chat</h3>
                <p>Select a contact from the left panel to start a conversation with faculty, administrators, or students.</p>
            </div>
            
            <div class="chat-header" id="chatHeader" style="display: none;">
                <button class="mobile-back-btn" onclick="closeMobileChat()">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <div class="chat-user-info">
                    <div class="chat-avatar" id="chatAvatar">
                        JD
                        <div class="online-indicator"></div>
                    </div>
                    <div class="chat-user-details">
                        <h4 id="chatUserName">John Doe</h4>
                        <p id="chatUserRole">Student ‚Ä¢ Computer Science</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button class="chat-action-btn" onclick="toggleChatInfo()">
                        <i class="fas fa-info-circle"></i>
                    </button>
                    <button class="chat-action-btn" onclick="archiveChat()">
                        <i class="fas fa-archive"></i>
                    </button>
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages" style="display: none;">
                <!-- Messages will be populated here -->
            </div>
            
            <div class="chat-input-container" id="chatInputContainer" style="display: none;">
                <div class="chat-input-wrapper">
                    <textarea class="chat-input" id="messageInput" placeholder="Type a message..." rows="1" onkeypress="handleKeyPress(event)" oninput="autoResize(this)"></textarea>
                    <div class="input-actions">
                        <button class="input-action-btn" onclick="attachFile()">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="input-action-btn send-btn" onclick="sendMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- New Chat Modal -->
    <div id="newChatModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Start New Conversation</h3>
                <button class="close" onclick="closeNewChatModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="text" class="gmail-search" id="gmailSearch" placeholder="Search by Gmail address..." oninput="searchGmail(this.value)">
                <div class="search-results" id="searchResults">
                    <div class="no-results">Start typing to search for users...</div>
                </div>
            </div>
        </div>
    </div>
            </div>
            
            <!-- Profile Content -->
            <div class="content-section" id="profile">
                <h2>Profile</h2>
                <p>Manage your personal information and account settings.</p>
            </div>
            
            <!-- Settings Content -->
            <div class="content-section" id="settings">
                <h2>Settings</h2>
                <p>Configure your dashboard preferences and account settings.</p>
            </div>
        </main>
    </div>
    
    <script>
       document.addEventListener('DOMContentLoaded', function() {
    console.log("üéØ Registrar Dashboard loaded - checking authentication...");
    // MOVE MODAL FUNCTIONS HERE - RIGHT AT THE START
    // Modal helper functions - MOVE THIS SECTION TO TOP
    window.openModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
            console.log('‚úÖ Modal opened:', modalId);
        } else {
            console.error('‚ùå Modal not found:', modalId);
        }
    };

    window.closeModal = function(modalId) {
        const modal = document.getElementById(modalId);
        if (modal) {
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            if (modalId === 'addSubjectModal') {
                const form = document.getElementById('addSubjectForm');
                if (form) form.reset();
            }
            console.log('‚úÖ Modal closed:', modalId);
        }
    };

    // Generate Report function - KEEP THIS HERE TOO
    window.generateReport = function() {
        if (!window.courseManagement?.currentProgram) {
            alert('Please select a program first');
            return;
        }
        
        const program = window.courseManagement.currentProgram;
        const reportData = {
            program: program.name,
            yearLevel: window.courseManagement.currentYearLevel,
            semester: window.courseManagement.currentSemester,
            timestamp: new Date().toLocaleDateString()
        };
        
        alert(`Report Generation:\nProgram: ${reportData.program}\nYear: ${reportData.yearLevel}\nSemester: ${reportData.semester}\n\nReport feature will be implemented soon.`);
    };

    console.log('‚úÖ Modal and report functions initialized globally');

    // Global wrapper functions for course management - ADD THIS
window.updateSubject = function() {
    console.log('üîÑ updateSubject called globally');
    if (window.courseManagement) {
        return window.courseManagement.updateSubject();
    } else {
        console.error('‚ùå CourseManagement not initialized');
        alert('Course Management system not ready. Please refresh the page.');
        return false;
    }
};

window.addSubject = function() {
    console.log('‚ûï addSubject called globally');
    if (window.courseManagement) {
        return window.courseManagement.addSubject();
    } else {
        console.error('‚ùå CourseManagement not initialized');
        alert('Course Management system not ready. Please refresh the page.');
        return false;
    }
};

window.editSubject = function(subjectId) {
    console.log('‚úèÔ∏è editSubject called globally for ID:', subjectId);
    if (window.courseManagement) {
        return window.courseManagement.editSubject(subjectId);
    } else {
        console.error('‚ùå CourseManagement not initialized');
        alert('Course Management system not ready. Please refresh the page.');
        return false;
    }
};

window.deleteSubject = function(subjectId) {
    console.log('üóëÔ∏è deleteSubject called globally for ID:', subjectId);
    if (window.courseManagement) {
        if (confirm('Are you sure you want to delete this subject?')) {
            return window.courseManagement.deleteSubject(subjectId);
        }
    } else {
        console.error('‚ùå CourseManagement not initialized');
        alert('Course Management system not ready. Please refresh the page.');
        return false;
    }
};

console.log('‚úÖ Global course management wrapper functions initialized');
    // ===== AUTHENTICATION FUNCTIONS =====
    
    // Check if user is authenticated (consistent with login.js)
    function checkAuthentication() {
        const isAuthenticated = sessionStorage.getItem('isAuthenticated') === 'true';
        const hasToken = sessionStorage.getItem('authToken') !== null;
        const hasUser = sessionStorage.getItem('userData') !== null;
        
        console.log("üîç Auth status:", { isAuthenticated, hasToken, hasUser });
        
        if (!isAuthenticated || !hasToken || !hasUser) {
            console.log("‚ùå Not authenticated, redirecting to login...");
            // Fixed: Use relative path like in login.js
            window.location.href = '../login.html';
            return false;
        }
        
        // Check if user role is registrar
        const userRole = getUserRole();
        console.log("üé≠ User role:", userRole);
        
        if (userRole !== 'registrar') {
            console.log("‚ùå Access denied - not a registrar role");
            alert('Access denied. This dashboard is for registrar accounts only.');
            window.location.href = '../login.html';
            return false;
        }
        
        return true;
    }
    
    // Get current user data (consistent with login.js)
    function getCurrentUser() {
        try {
            const userData = sessionStorage.getItem('userData');
            if (userData) {
                const user = JSON.parse(userData);
                console.log("üë§ Current user retrieved:", user);
                return user;
            }
            console.log("‚ùå No user data found");
            return null;
        } catch (error) {
            console.error("‚ùå Error parsing user data:", error);
            return null;
        }
    }
    
    // Get user role (consistent with login.js)
    function getUserRole() {
        // Try stored role first
        const storedRole = sessionStorage.getItem('userRole');
        if (storedRole) {
            console.log("üé≠ Role from storage:", storedRole);
            return storedRole;
        }
        
        // Try user data role
        const userData = sessionStorage.getItem('userData');
        if (userData) {
            try {
                const user = JSON.parse(userData);
                if (user.role) {
                    console.log("üé≠ Role from user data:", user.role);
                    return user.role.toLowerCase();
                }
            } catch (error) {
                console.error("Error parsing user data for role:", error);
            }
        }
        
        console.log("üé≠ Default role: student");
        return 'student';
    }
    
    // Enhanced server request with error handling
    async function makeServerRequest(url, options = {}) {
        const token = sessionStorage.getItem('authToken');
        
        // Add auth header if token exists
        const defaultHeaders = {
            'Content-Type': 'application/json',
            ...(token && { 'Authorization': `Bearer ${token}` })
        };
        
        const requestOptions = {
            ...options,
            headers: {
                ...defaultHeaders,
                ...options.headers
            }
        };
        
        try {
            const response = await fetch(url, requestOptions);
            
            // Handle authentication errors
            if (response.status === 401) {
                console.log("üîí Authentication expired, redirecting to login...");
                sessionStorage.clear();
                window.location.href = '../login.html';
                return null;
            }
            
            return response;
        } catch (error) {
            console.error("üö® Server request failed:", error);
            
            // Check if we just logged in - if so, don't show error
            const justLoggedIn = sessionStorage.getItem('justLoggedIn') === 'true';
            const skipServerCheck = sessionStorage.getItem('skipInitialServerCheck') === 'true';
            
            if (justLoggedIn || skipServerCheck) {
                console.log("‚è≠Ô∏è Skipping server error - just logged in");
                return null;
            }
            
            return null;
        }
    }
    
    // Load dashboard data with fallback
    async function loadDashboardData() {
        console.log("üìä Loading registrar dashboard data...");
        
        // Clear the login flags first
        sessionStorage.removeItem('justLoggedIn');
        sessionStorage.removeItem('skipInitialServerCheck');
        
        // Try to load announcements
        try {
            const response = await makeServerRequest('http://localhost:3006/api/announcements');
            if (response && response.ok) {
                const data = await response.json();
                console.log("üì¢ Announcements loaded:", data);
                // Update announcements UI here
            }
        } catch (error) {
            console.log("‚ö†Ô∏è Failed to load announcements, using offline mode");
        }
        
        console.log("üìä Registrar dashboard data loading complete");
    }
    
    // ===== DASHBOARD INITIALIZATION =====
    
    // Initialize dashboard with offline support
    function initializeDashboard() {
        console.log("üèÅ Initializing registrar dashboard...");
        
        if (!checkAuthentication()) {
            return;
        }
        
        const user = getCurrentUser();
        if (!user) {
            console.log("‚ùå No user data found, redirecting to login...");
            window.location.href = '../login.html';
            return;
        }
        
        console.log("üë§ Dashboard user:", user);
        
        // Get user info for display
        const userName = user.username || user.name || user.first_name || 'Registrar';
        const userEmail = user.email || '';
        const userRole = user.role || 'registrar';
        
        console.log("üé≠ Display info:", { userName, userEmail, userRole });
        
        // Update UI with user info
        const userNameElements = document.querySelectorAll('[data-user-name]');
        userNameElements.forEach(el => {
            el.textContent = userName;
        });
        
        // Set user role
        const userRoleElements = document.querySelectorAll('[data-user-role]');
        userRoleElements.forEach(el => {
            el.textContent = userRole.charAt(0).toUpperCase() + userRole.slice(1);
        });
        
        // Update specific elements if they exist
        const userNameDisplay = document.getElementById('userNameDisplay');
        const userRoleDisplay = document.getElementById('userRoleDisplay');
        const userMenuName = document.getElementById('userMenuName');
        const userMenuEmail = document.getElementById('userMenuEmail');
        const welcomeMessage = document.getElementById('welcomeMessage');

        if (userNameDisplay) {
            userNameDisplay.textContent = userName;
            console.log("‚úÖ Updated userNameDisplay");
        }
        if (userRoleDisplay) {
            userRoleDisplay.textContent = userRole.charAt(0).toUpperCase() + userRole.slice(1);
            console.log("‚úÖ Updated userRoleDisplay");
        }
        if (userMenuName) {
            userMenuName.textContent = userName;
            console.log("‚úÖ Updated userMenuName");
        }
        if (userMenuEmail) {
            userMenuEmail.textContent = userEmail;
            console.log("‚úÖ Updated userMenuEmail");
        }
        if (welcomeMessage) {
            const firstName = userName.split(' ')[0];
            welcomeMessage.textContent = `Welcome, ${firstName}!`;
            console.log("‚úÖ Updated welcomeMessage");
        }
        
        // Load dashboard data with error handling
        setTimeout(() => {
            loadDashboardData();
        }, 500);
        
        console.log("‚úÖ Registrar dashboard initialized successfully");
    }

    

// Close modal when clicking outside - ADD TO REGISTRAR
document.addEventListener('click', function(e) {
    if (e.target.classList.contains('modal')) {
        const modalId = e.target.id;
        closeModal(modalId);
    }
});
    
    // ===== DARK MODE FUNCTIONALITY =====
    function initializeDarkMode() {
        const darkModeToggle = document.getElementById('darkModeToggle');
        const htmlElement = document.documentElement;
        
        if (!darkModeToggle) {
            console.log("‚ö†Ô∏è Dark mode toggle not found");
            return;
        }
        
        // Dark mode toggle event listener
        darkModeToggle.addEventListener('change', function() {
            if (this.checked) {
                htmlElement.setAttribute('data-theme', 'dark');
                console.log("üåô Dark mode enabled");
            } else {
                htmlElement.removeAttribute('data-theme');
                console.log("‚òÄÔ∏è Light mode enabled");
            }
        });
        
        console.log("‚úÖ Dark mode initialized");
    }

    // ===== UI FUNCTIONALITY =====
    
    // Sidebar toggle functionality
    const sidebar = document.getElementById('sidebar');
    const sidebarToggle = document.getElementById('sidebarToggle');
    if (sidebarToggle && sidebar) {
        sidebarToggle.addEventListener('click', function() {
            sidebar.classList.toggle('collapsed');
            console.log("üì± Sidebar toggled");
        });
        console.log("‚úÖ Sidebar toggle initialized");
    }
    
    // Navigation handling
    const navItems = document.querySelectorAll('.nav-item');
    const contentSections = document.querySelectorAll('.content-section');
    
    if (navItems.length > 0) {
        navItems.forEach(item => {
            item.addEventListener('click', function() {
                const sectionName = this.getAttribute('data-section');
                console.log("üìç Navigating to section:", sectionName);
                
                // Remove active class from all nav items
                navItems.forEach(nav => nav.classList.remove('active'));
                // Add active class to clicked item
                this.classList.add('active');
                
                // Hide all content sections
                contentSections.forEach(section => section.classList.remove('active'));
                // Show selected content section
                const targetSection = document.getElementById(sectionName);
                if (targetSection) {
                    targetSection.classList.add('active');
                    console.log("‚úÖ Switched to section:", sectionName);
                } else {
                    console.log("‚ö†Ô∏è Target section not found:", sectionName);
                }
            });
        });
        console.log("‚úÖ Navigation initialized");
    }
    
    // Logout functionality
    window.logout = function() {
        console.log("üö™ Logging out...");
        sessionStorage.clear();
        window.location.href = '../login.html';
    };

    // Multiple logout buttons functionality
    const logoutBtns = [
        document.getElementById('logoutBtn'),
        document.getElementById('userMenuLogout')
    ];
    
    logoutBtns.forEach((btn, index) => {
        if (btn) {
            btn.addEventListener('click', function(e) {
                e.preventDefault();
                if (confirm('Are you sure you want to logout?')) {
                    console.log(`üö™ Logout triggered from button ${index + 1}`);
                    sessionStorage.clear();
                    window.location.href = '../login.html';
                }
            });
            console.log(`‚úÖ Logout button ${index + 1} initialized`);
        }
    });
    
    // Notification icon
    const notificationIcon = document.getElementById('notificationIcon');
    if (notificationIcon) {
        notificationIcon.addEventListener('click', function() {
            console.log("üîî Notification clicked");
            alert('Notifications feature coming soon!');
        });
        console.log("‚úÖ Notification icon initialized");
    }

    // Search functionality
    const searchInput = document.querySelector('.search-input');
    if (searchInput) {
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            console.log('üîç Searching for:', searchTerm);
            // Add your search logic here
        });
        console.log("‚úÖ Search functionality initialized");
    }
    
    
    
    // ===== INITIALIZE EVERYTHING =====
    
    try {
        console.log("üöÄ Starting registrar dashboard initialization...");
        
        // Initialize dark mode
        initializeDarkMode();
        
        // Initialize the dashboard
        initializeDashboard();
        
        
        
        // Add periodic auth check
        setInterval(() => {
            if (!checkAuthentication()) {
                console.log("üîí Periodic auth check failed, redirecting...");
                return;
            }
        }, 60000); // Check every minute
        
        console.log("‚úÖ Complete registrar dashboard handler loaded successfully");
        
    } catch (error) {
        console.error("üö® Error during dashboard initialization:", error);
    }
});

document.addEventListener("DOMContentLoaded", function () {
    // ADD NULL CHECKS
    const modal = document.getElementById("announcementModal");
    const addBtn = document.getElementById("addAnnouncementBtn");
    const closeBtn = document.getElementById("modalCloseBtn");
    const cancelBtn = document.getElementById("cancelBtn");
    
    // Only proceed if elements exist
    if (modal && addBtn && closeBtn && cancelBtn) {
        // Open modal
        addBtn.addEventListener("click", () => {
            modal.classList.add("active");
            document.body.classList.add("modal-open");
        });

        // Close modal
        [closeBtn, cancelBtn].forEach((btn) =>
            btn.addEventListener("click", () => {
                modal.classList.remove("active");
                document.body.classList.remove("modal-open");
            })
        );
    }
    
    const searchInput = document.getElementById('subjectSearch');
    if (searchInput) {
        searchInput.addEventListener('input', function(e) {
            if (window.courseManagement) {
                window.courseManagement.filterSubjects(e.target.value);
            }
        });
    }
});

  
    </script>
    <script src="../authCheck.js" defer></script>
    <script src="../chat.js" defer></script>
    <script src="registrardashboard.js" defer></script>
    <script src="../studentinfo.js"></script>
    <script src="../AdminSide/courseManagement.js"></script>
    <script src="../announcements.js"></script>
    <script src="enrollment-requests.js"></script>
</body>
</html>